{% extends 'base.html' %}
{% block title %}
  {{league.name}} 
{% endblock title %}

{% block content %}



    {% comment %} <h1 class="text-center mt-5 mb-3">{{league.name}}</h1> {% endcomment %}
    

  
    <div class="container-sm">
      <h1 class="fs-3 text-center mt-4 mx-3 bg-primary text-light p-1 rounded-pill">{{league.name}}</h1>
      <table class="table table-bordered mt-3" id="userStatsTable">
        <thead>
            <tr>
                <th>Username</th>
                <th>No of Predictions</th>
                <th>Total Points</th>
                <th>Avg Points</th>
                <th>6</th>
                <th>4</th>
                <th>3</th>
                <th>2</th>
                <th>1</th>
                <th>0</th>
            </tr>
        </thead>
        <tbody>
            {% for user_stats in league.old_points %}
                <tr>
                    <td class="d-grid"><a class="btn btn-primary btn-sm" href="{% url 'predicts:user_prediction_list' user.username %}">{{ user_stats.user__username }}</a></td>
                    {% comment %} <td>{{ user_stats.user__username }}</td> {% endcomment %}
                    <td>{{ user_stats.total_predictions_by_user }}</td>
                    <td>{{ user_stats.total_points }}</td>
                    <td>{{ user_stats.avg_points_per_user }}</td>
                    <td>{{ user_stats.points_6 }}</td>
                    <td>{{ user_stats.points_4 }}</td>
                    <td>{{ user_stats.points_3 }}</td>
                    <td>{{ user_stats.points_2 }}</td>
                    <td>{{ user_stats.points_1 }}</td>
                    <td>{{ user_stats.points_0 }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
        

          <div class="d-flex flex-column">
            <small class="fw-bold">Legend:</small>
            <small><span class="fw-bold">WP</span> - Weekly Points (series of last 4 weeks)</small>
            <small><span class="fw-bold">WPS</span> - Weekly Points Sum (sum of weekly points from this month)</small>
            <small><span class="fw-bold">MP</span> - Monthly Points (series of last 4 months)</small>
            <small><span class="fw-bold">TP</span> - Total Points (sum of montly points)</small>
          </div>
          <hr>
          <div class="d-flex justify-content-between">
              <small>Created: {{league.create_date}}</small>
              <small>Admin: {{league.admin}}</small>
              <small>PIN: {{league.pin}}</small>
          </div>
          <div class="info mt-3">
            <p class="">League info/rules:</p>
            <small>{{league.rules|linebreaks}}</small>
          </div>
    </div>




  <!-- DataTables CSS and JS -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready( function () {
        $('#userStatsTable').DataTable({
            "paging": false,  // Disable pagination
            "searching": false,  // Disable search bar
            "order": [[2, 'desc']]  // Default sorting by Total Points (index 2) in descending order
        });
    });
</script>

{% endblock content %}